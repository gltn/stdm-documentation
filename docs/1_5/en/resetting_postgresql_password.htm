<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="OriginalFile" content="Resetting PostgreSQL Password.docx"/>
    <meta http-equiv="Content-Language" content="en-UK"/>

    <title>Resetting PostgreSQL Password</title>


</head>

<body>




<h1>Resetting ‘postgres’ Password in Local Server </h1>
<p><span
        style="font-style: normal;">Note:</span></i></b> <i><span style="font-style: normal;">This
 will only work if the user has access to the localhost machine. The password 
 cannot be reset for a remote server running PostgreSQL</span></i>.</p>
<p><i><span
        style="font-style: normal; font-weight: bold;">Synopsis:</span></i>
    The steps below will temporarily disable password authentication which
    will then enable you to set a new password before finally re-enabling
    password authentication.</p>
<p class="ListParagraphCxSpFirst" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">1.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;Browse
    to the location of the PostgreSQL installation i.e. <i style="font-style: normal;
														 font-weight: bold;">C:\Program
        Files\PostgreSQL\9.x<span class="FootnoteReference" style="font-style: normal;
							 font-weight: bold;"><![if !supportFootnotes]></span><b><span
                class="FootnoteReference" style="line-height: 115%; font-style: normal;
	 font-weight: bold;">[1]</span></b><span class="FootnoteReference"
                                             style="font-style: normal;
											 font-weight: bold;"><![endif]></span>\data</i>
    and locate the file named <i style="font-style: normal; font-weight: bold;">pg_hba.conf</i>.
    Open this file using any text editor such as Notepad or preferably, Notepad
    ++ (click <a href="https://notepad-plus-plus.org/repository/6.x/6.9.1/npp.6.9.1.Installer.exe"
    >here</a>
    to download). If you are using Notepad, make sure you have chosen <span
            style="font-weight: bold;">All Files</span> in the file type selection
    as shown below:</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;"><img  src="1_5/en/images/image002.png" alt="" border="0"
                                                style="width:100%; max-width:618px"/>&#160;</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">2.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;Once
    the file is open, scroll to the bottom of the file and locate the following
    lines:</p>
<p class="ListParagraphCxSpMiddle" style="margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">#
    TYPE&#160;&#160;DATABASE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;USER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ADDRESS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;METHOD</p>
<p class="ListParagraphCxSpMiddle" style="margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">#
    IPv4 local connections:</p>
<p class="ListParagraphCxSpMiddle" style="margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">host&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;127.0.0.1/32&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<b><span
        style="color: #ff0000;">md5</span></b></p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;"># IPv6 local connections:</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">host&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;::1/128&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<b><span
        style="color: #ff0000;">md5</span></b></p>
<p class="ListParagraphCxSpLast" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">3.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;Change
    the <i>md5</i> text (as highlighted in red above) to <i>trust</i>. The
    updated text should now look like as shown below. Save changes in the
    file.</p>
<p style="margin-top: 0in; margin-right: 0in; margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 88px; text-align: left;">#
    TYPE&#160;&#160;DATABASE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;USER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ADDRESS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;METHOD</p>
<p style="margin-top: 0in; margin-right: 0in; margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 88px; text-align: left;">#
    IPv4 local connections:</p>
<p style="margin-top: 0in; margin-right: 0in; margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 88px; text-align: left;">host&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;127.0.0.1/32&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<b><span
        style="color: #ff0000;">trust</span></b></p>
<p style="margin-top: 0in; margin-right: 0in; margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 88px; text-align: left;">#
    IPv6 local connections:</p>
<p style="line-height: 150%; font-family: Cambria, serif; margin-left: 88px; 
	 text-align: left;">host&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;::1/128&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<b><span
        style="color: #ff0000;">trust</span></b></p>
<p class="ListParagraphCxSpFirst" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">4.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;In
    order for the new changes to take effect, the PostgreSQL Windows service
    needs to be restarted. To load the window showing all services running
    in the computer, click <span style="font-weight: bold;">Start</span> then
    type ‘services’ in the search textbox. In the resulting list of matching
    items, click Services as shown below:</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;"><img  src="1_5/en/images/image005.png" alt="" border="0"
                                                style="width:100%; max-width:377px"/></p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">5.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;In
    the Services window, locate the PostgreSQL service which is usually named
    <span style="font-weight: bold;">postgresql-x64-9.x- PostgreSQL Server
 9.x</span>. Right click and select <i style="font-style: normal; font-weight: bold;">Restart</i>
    so that the new changes can be applied.</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">&#160;</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">6.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;Click
    Start &gt; PostgreSQL 9.x &gt; pgAdmin III to start the PostgreSQL database
    manager. Double click on the node, named <b><i>PostgreSQL&#160;&#160;9.x
        (localhost:54xx)</i></b>, under <i>Servers</i> group; a password window
    will appear. Since we have disabled the need for a password, click on
    the <span style="font-weight: bold;">OK</span> button and the <span style="font-weight: bold;">postgres</span>
    account will be logged <span>in
 as shown in the image below</span>.</p>
<p class="ListParagraphCxSpMiddle" style="font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">&#160;</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;"><img  src="1_5/en/images/image0082.jpg" alt="" border="0"
                                                style="width:100%; max-width:781px"/></p>
<p class="ListParagraphCxSpMiddle" style="font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">&#160;</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">7.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;Once
    logged in, click on the <i style="font-style: normal; font-weight: bold;">Database</i>
    node then select any database under it.</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;"><img  src="1_5/en/images/image009.png" alt="" border="0"
                                                style="width:100%; max-width:214px"/></p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">8.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;The
    next step is to run a query that sets the new passwords for the postgres
    user account. With the database node selected (for example, <span style="font-weight: bold;">stdm</span>
    in the step above), click on the ‘Execute arbitrary SQL queries’ icon
    <img  src="1_5/en/images/image011.png" alt="" border="0" style="width:100%; max-width:41px"/>&#160;in
    the toolbar.</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">In the resulting SQL Editor
    window, type the following command:</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 font-weight: bold; margin-left: 40px; text-align: left;">ALTER USER
    postgres with password 'new-password';</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">In place of <span
        style="font-weight: bold;">new-password</span>,
    enter your desired password. </p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">Do not forget to enclose the
    new password in single quotes.</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">While still in the SQL Editor
    window, click the ‘Execute query’ <img  src="1_5/en/images/image013.png" alt="" border="0"
                                           style="width:100%; max-width:23px"/>&#160;icon
    in the toolbar. The query should run successfully with no errors.</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">9.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;&#160;&#160;&#160;</span>&#160;Close
    the SQL Editor, choose No when requested to save changes.</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">10.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;</span>&#160;Close
    pgAdmin III.</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">11.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;</span>&#160;We
    need to re-enable password authentication. This is done by restoring the
    initial authentication settings. In this case, repeat step 1 above to
    open <i style="font-style: normal; font-weight: bold;">pg_hba.conf</i>.</p>
<p class="ListParagraphCxSpLast" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">12.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;</span>&#160;Scroll
    to the bottom and replace the following section with the original text
    i.e. the new text should read:</p>
<p style="margin-top: 0in; margin-right: 0in; margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 88px; text-align: left;">#
    TYPE&#160;&#160;DATABASE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;USER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ADDRESS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;METHOD</p>
<p style="margin-top: 0in; margin-right: 0in; margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 88px; text-align: left;">#
    IPv4 local connections:</p>
<p style="margin-top: 0in; margin-right: 0in; margin-bottom: .0001pt; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 88px; text-align: left;">host&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;127.0.0.1/32&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<b><span
        style="color: #ff0000;">md5</span></b></p>
<p style="line-height: 150%; font-family: Cambria, serif; margin-left: 88px; 
	 text-align: left;"># IPv6 local connections:</p>
<p style="line-height: 150%; font-family: Cambria, serif; margin-left: 88px; 
	 text-align: left;">host&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;all&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;::1/128&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<b><span
        style="color: #ff0000;">md5</span></b></p>
<p class="ListParagraphCxSpFirst" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">Save changes in the file.</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">13.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;</span>&#160;Follow
    steps 4. and 5. above to restart the service.</p>
<p class="ListParagraphCxSpMiddle" style="text-indent: -.25in; line-height: 150%; 
	 font-family: Cambria, serif; margin-left: 40px; text-align: left;">14.<span
        style="font: 7.0pt 'Times New Roman';">&#160;&#160;</span>&#160;Restart
    QGIS and try login into STDM using the following credentials:</p>
<p class="ListParagraphCxSpMiddle" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">Username: <b>postgres</b></p>
<p class="ListParagraphCxSpLast" style="line-height: 150%; font-family: Cambria, serif; 
	 margin-left: 40px; text-align: left;">Password: <b><i>[new password
    set in step 8. above]</i></b></p>
<div>
	<span><br style="clear: all;"
              clear="all"/>
	</span>
    <hr size="1" width="33%" align="left"/>
    <div id="ftn1">
        <p class="FootnoteText"><span
                class="FootnoteReference"><![if !supportFootnotes]>[1]<![endif]></span>
            <i>x</i> refers to the minor version number of PostgreSQL i.e.
            9.1, 9.2, 9.3, 9.4 or 9.5</p>
    </div>
</div>

</body>
</html>
